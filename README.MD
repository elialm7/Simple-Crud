Perfecto, te propongo una versión simplificada y enfocada en **MySQL y PostgreSQL**, con un ejemplo completo que cubre **entidad, SQL y mapeo a objeto**, explicaciones de tipos y base de datos soportadas. Mantengo tu estilo de Markdown pero más conciso y práctico.

---

# Simple - CRUD Library for Java

A lightweight, annotation-driven CRUD library for Java with automatic SQL generation and type transformations. Supports MySQL and PostgreSQL fully.
Built on top of JDBI.

## Features

* **Zero configuration**: Define entities with annotations.
* **Automatic SQL generation**: INSERT, UPDATE, SELECT statements created automatically.
* **Type transformations**: JSON, arrays, enums, UUIDs handled automatically.

---

## 1. Complete Example

### Entity

```java
@Table(value = "complex_entities", schema = "public", dialect = Dialect.POSTGRESQL)
public class TestUserPostgresql {

    @Id(autoGenerated = true)
    private Long id;

    @Column("entity_name")
    private String name;

    @UUID(autoGenerate = true)
    @Column("uuid_field")
    private java.util.UUID uuid;

    @JsonColumn
    @Column("preferences_json")
    private UserPreferences preferences;

    @JsonColumn
    private Map<String, Object> metadata;

    @JsonColumn
    @Column("raw_json")
    private JsonNode rawJson;

    @ArrayColumn(separator = ",")
    private List<String> tags;

    @ArrayColumn(separator = "|")
    private String[] categories;

    @EnumColumn(EnumColumn.EnumType.STRING)
    private Status status;

    @EnumColumn(EnumColumn.EnumType.ORDINAL)
    private Priority priority;

    @EnumColumn(EnumColumn.EnumType.CODE)
    private Department department;

    @FileColumn
    private byte[] document;

    @CreatedDate
    @Column("created_at")
    private LocalDateTime createdAt;

    @UpdatedDate
    @Column("updated_at")
    private LocalDateTime updatedAt;
}
```

### Supporting Classes

```java
public class UserPreferences {
    private String theme;
    private boolean notifications;
    private Map<String, String> settings;
    // getters/setters
}

public enum Status { ACTIVE, INACTIVE }
public enum Priority { LOW, MEDIUM, HIGH }
public enum Department {
    SALES("SALE"), ENGINEERING("ENG");
    private final String code;
    Department(String code) { this.code = code; }
    public String getCode() { return code; }
}
```

---

### CRUD Class

```java
public class TestUserCRUD extends CRUD<TestUserPostgresql, Long> {
    public TestUserCRUD(Jdbi jdbi) { super(jdbi, TestUserPostgresql.class, Long.class); }
}
```

---

## 2. Example Usage

```java
Jdbi jdbi = Jdbi.create("jdbc:postgresql://localhost/mydb", "user", "pass");
TestUserCRUD crud = new TestUserCRUD(jdbi);

// Create
TestUserPostgresql user = new TestUserPostgresql();
user.setName("John Doe");
user.setPreferences(new UserPreferences("dark", true, Map.of("lang", "en")));
user.setMetadata(Map.of("version","1.0"));
user.setTags(List.of("important","test"));
user.setCategories(new String[]{"cat1","cat2"});
user.setStatus(Status.ACTIVE);
user.setPriority(Priority.HIGH);
user.setDepartment(Department.ENGINEERING);

Long id = crud.save(user);

// Read
List<TestUserPostgresql> allUsers = crud.findAll();
Optional<TestUserPostgresql> oneUser = crud.findById(id);

// Update
user.setName("John Updated");
crud.update(user);

// Delete
crud.deleteById(id);
```

---

## 3. Database Schema Examples

### PostgreSQL

```sql
CREATE TABLE public.complex_entities (
    id BIGSERIAL PRIMARY KEY,
    entity_name VARCHAR(255),
    uuid_field UUID,
    preferences_json JSONB,
    metadata JSONB,
    raw_json JSONB,
    tags TEXT,
    categories TEXT,
    status VARCHAR(50),
    priority INTEGER,
    department VARCHAR(10),
    document BYTEA,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### MySQL

```sql
CREATE TABLE complex_entities (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    entity_name VARCHAR(255),
    uuid_field VARCHAR(36),
    preferences_json JSON,
    metadata JSON,
    raw_json JSON,
    tags TEXT,
    categories TEXT,
    status VARCHAR(50),
    priority INT,
    department VARCHAR(10),
    document LONGBLOB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

---

## 4. Supported Data Types

| Java Type               | PostgreSQL      | MySQL           | Notes                                 |
| ----------------------- | --------------- | --------------- | ------------------------------------- |
| String                  | VARCHAR/TEXT    | VARCHAR/TEXT    | Regular string                        |
| UUID                    | UUID            | VARCHAR(36)     | Native in PG, string in MySQL         |
| Object / Map / JsonNode | JSONB           | JSON            | Auto-serialized via Jackson           |
| List<String>            | TEXT            | TEXT            | Comma-separated or custom separator   |
| String\[]               | TEXT            | TEXT            | Use @ArrayColumn for custom separator |
| Enum                    | VARCHAR/INTEGER | VARCHAR/INTEGER | STRING / ORDINAL / CODE               |
| byte\[]                 | BYTEA           | LONGBLOB        | File storage                          |
| LocalDateTime           | TIMESTAMP       | TIMESTAMP       | Used for audit fields                 |

---
# CRUD Library - Data Type Mapping Diagram

| Java Type                       | Annotation                      | PostgreSQL Column     | MySQL Column          | Notes                                              |                                 |
| ------------------------------- | ------------------------------- | --------------------- | --------------------- | -------------------------------------------------- | ------------------------------- |
| `String`                        | `@Column`                       | `VARCHAR(n)` / `TEXT` | `VARCHAR(n)` / `TEXT` | Simple string mapping                              |                                 |
| `java.util.UUID`                | `@UUID(autoGenerate = true)`    | `UUID`                | `VARCHAR(36)`         | Auto-generated UUID, native in PG, string in MySQL |                                 |
| `Object` / `Map<String,Object>` | `@JsonColumn`                   | `JSONB`               | `JSON`                | Auto-serialized via Jackson                        |                                 |
| `JsonNode`                      | `@JsonColumn`                   | `JSONB`               | `JSON`                | Raw JSON, can store any structure                  |                                 |
| `List<String>`                  | `@ArrayColumn(separator=",")`   | `TEXT`                | `TEXT`                | Stored as comma-separated string                   |                                 |
| `String[]`                      | \`@ArrayColumn(separator="      | ")\`                  | `TEXT`                | `TEXT`                                             | Stored as pipe-separated string |
| Enum (STRING)                   | `@EnumColumn(EnumType.STRING)`  | `VARCHAR(50)`         | `VARCHAR(50)`         | Stores enum name                                   |                                 |
| Enum (ORDINAL)                  | `@EnumColumn(EnumType.ORDINAL)` | `INTEGER`             | `INT`                 | Stores enum ordinal (0,1,2…)                       |                                 |
| Enum (CODE)                     | `@EnumColumn(EnumType.CODE)`    | `VARCHAR(10)`         | `VARCHAR(10)`         | Stores custom code via `getCode()`                 |                                 |
| `byte[]`                        | `@FileColumn`                   | `BYTEA`               | `LONGBLOB`            | File storage                                       |                                 |
| `Boolean`                       | `@Default("true")`              | `BOOLEAN`             | `TINYINT(1)`          | Default value support                              |                                 |
| `Integer`                       | `@Default("0")`                 | `INTEGER`             | `INT`                 | Default value support                              |                                 |
| `LocalDateTime`                 | `@CreatedDate` / `@UpdatedDate` | `TIMESTAMP`           | `TIMESTAMP`           | Auto timestamps for creation/update                |                                 |

---

## 5. Supported Databases

| Database   | Support                                                   |
| ---------- | --------------------------------------------------------- |
| PostgreSQL | ✅ Full support (UUID, JSONB, arrays, enums)               |
| MySQL 5.7+ | ✅ Full support (UUID as string, JSON, arrays, enums)      |
| SQL Server | ⚠ Untested – likely works for basic types, UUID as string |

> ⚠ Only MySQL and PostgreSQL fully tested. Other databases may work but require additional configuration.

---

## 6. Notes & Best Practices

* UUID: Auto-generated or manual. PostgreSQL uses native UUID type, MySQL stores as string.
* JSON: Annotate with `@JsonColumn`. Supports custom objects, maps, or `JsonNode`.
* Arrays: Annotate with `@ArrayColumn(separator)`.
* Enums: Use `@EnumColumn` and choose STRING, ORDINAL, or CODE.
* Files: Use `@FileColumn` with `byte[]`.
* Timestamps: Use `@CreatedDate` and `@UpdatedDate` for automatic handling.
* Batch inserts/updates supported for large datasets.
* Transactions supported via JDBI `withHandle` or `inTransaction`.

---

Si querés, puedo hacer una **segunda versión aún más visual**, con un diagrama que muestre **tipo de dato → columna SQL → anotación Java**, para que quede súper claro cómo funciona el mapeo entre objetos y bases.

¿Querés que haga eso también?
